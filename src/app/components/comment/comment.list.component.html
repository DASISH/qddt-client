<div class="row" *ngIf="comments">
  <a class="btn btn-flat btn-medium waves-effect waves-light teal white-text" (click)="showComments = !showComments;" title="View Comment(s)">
  <i class="material-icons left" >message</i>{{ size }} </a>
  <div *ngIf="showComments">
    <ul class="collection row">
      <li class="collection-item avatar" *ngFor="let comment of comments; let idx=index;">
        <div *ngIf="showPrivate || comment.public ">
          <img gravatar [email]="comment?.modifiedBy?.email" [size]="48" class="circle">
          <span class="title" [style.color]="comment.public ? 'blue': 'grey'" i18n>
           {{comment.modifiedBy.name}}@{{comment.modifiedBy.agencyName}}  {{ comment?.modified | date:'long' }}
            <i *ngIf="comment.public" class="material-icons left tiny" title="This comment is visible for all">public</i>
          </span>
          <div *ngIf="!isEditComment">
            <a class="btn-flat btn-floating btn-medium waves-effect waves-light teal"
               style="position: absolute; left: 15px; top: 50px;"
               (click)="isEditComment=true;isPublic=comment.public;message=comment.comment;selectedCommentId=idx;">
              <i class="material-icons left medium" title="Edit" >edit</i>
            </a>
            <qddt-confirm-delete  style="position: absolute; left: 15px; top: 90px;"
                                 [element]="commentAsElement(comment,idx)"
                                 (confirmAction)="onDeleteComment($event)">
            </qddt-confirm-delete>
          </div>
          <div *ngIf="isEditComment">
            <a class="btn-flat btn-floating btn-medium waves-effect waves-light teal lighten-1" style="position: absolute; left: 15px; top: 50px;"
               (click)="onUpdateComment(idx)">
              <i class="material-icons white-text" title="Save and close" >done_all</i>
            </a>
            <a class="btn-flat btn-floating btn-medium waves-effect waves-light teal lighten-2 " style="position: absolute; left: 15px; top: 90px;"
               (click)="isEditComment=false">
              <i class="material-icons white-text" title="Cancel edit">cancel</i>
            </a>
          </div>
          <div class="row" *ngIf="!isEditComment || selectedCommentId !== idx">
            <br>
            <div class="col s11"><p [innerHtml] = "comment.comment"></p></div>
          </div>
          <div class="row" [hidden]="!(isEditComment && selectedCommentId === idx)">
            <div class="input-field col s9">
              <textarea class="materialize-textarea" name="{{comment.id}}-comment" data-length="10000" [(ngModel)]="message">
              </textarea>
            </div>
            <div class="col s3">
              <div class="switch">
                <label>
                  <input type="checkbox" [(ngModel)]="isPublic" >
                  <span class="lever"></span>Published
                </label>
              </div>
            </div>
          </div>
          <!--<i class="secondary-content material-icons right ">comment</i>-->
          <qddt-comment-list *ngIf="showComments" [showPrivate]="showPrivate"
            [ownerId]="comment.id" [comments]="comment.comments">
          </qddt-comment-list>
        </div>
      </li>
    </ul>
    <qddt-comment-create (updatedEvent)="addComment($event)" [ownerId]="ownerId">
    </qddt-comment-create>
  </div>
</div>
