<ng-container *ngFor="let cqi of subSequence;let idx = index;">
  <li [ngStyle]="{'marginLeft': level*1.5+'rem' }"
      (mouseenter)="showButton = !readonly" (mouseleave)="showButton = false" (click)="onOpenBody(cqi)">
    <div class="collapsible-header grey lighten-5">
      <ul *ngIf="showButton" class="dropleft">
        <li>
          <a class="btn-flat btn-floating btn-small waves-effect waves-light lighten-2 blue"
            (click)="onItemUpdate($event, cqi)">
            <i class="material-icons" title="update selected">sync</i>
          </a>
        </li>
        <li>
          <a class="btn-flat btn-floating btn-small waves-effect waves-light lighten-2 red"
            (click)="onItemRemove($event, cqi)">
            <i class="material-icons" title="Remove selected">remove</i>
          </a>
        </li>
        <li>
          <a class="btn-flat btn-floating btn-small waves-effect waves-light lighten-2 green"
            (click)="onItemNew($event, cqi)">
            <i class="material-icons" title="insert above">add</i>
          </a>
        </li>
      </ul>
      <i class="material-icons small">{{getMatIcon(cqi.elementRef?.elementKind)}}</i>
      <div class="col s9 m10 " [innerHtml]=cqi.elementRef?.name></div>
      <qddt-version-label class="col s3 m2 " [revisionRef]="cqi.elementRef"></qddt-version-label>
    </div>
    <div class="collapsible-body">
      <label *ngIf="cqi.parameters.size > 0">Parameters</label>
      <div *ngFor="let parameter of cqi.parameters">
        <div class="chip"> {{parameter.name}} </div>
      </div>
      <qddt-preview-element [element]="cqi.elementRef.element" [showDetail]="false"></qddt-preview-element>
      <label *ngIf="isSequence(cqi.elementRef.elementKind)">Description</label>
    </div>
  </li>

  <qddt-instrument-sequence-tree *ngIf="cqi.sequence?.length >0" [subSequence]="cqi.sequence" [level]="level+1">
  </qddt-instrument-sequence-tree>
</ng-container>
