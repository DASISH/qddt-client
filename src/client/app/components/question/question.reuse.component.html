<a class="modal-trigger btn-flat btn-floating btn-medium waves-effect waves-light teal"
   (click)="openModal2()">
  <i class="material-icons left medium" title="Add QuestionItem to element">playlist_add</i>
</a>
<div class="modal modal-fixed-footer"
     materialize="modal" [materializeActions]="materializeActions">
  <div class="modal-content">
    <form #hf="ngForm">
      <div *ngIf="reuseQuestionItem">
        <h3 class="teal-text ">Reuse Question Item</h3>
        <div class="row black-text"><span>{{questionItem?.question?.question}}</span></div>
        <div class="row black-text">
          <autocomplete [items]="questionItems" [searchField]="['name', ['question','question']]"
                        [initialValue]="''"
                        [searchFromServer]="true"
                        [isMutipleFields]="true"
                        (autocompleteFocusEvent)="selectedIndex=idx;"
                        (enterEvent)="searchQuestionItems($event)"
                        [placeholder] = "'Search in question name or question text'"
                        (autocompleteSelectEvent)="selectQuestionItem($event)">
          </autocomplete>
        </div>
      </div>
    </form>
    <div class="row" *ngIf="questionItem">
      <div class="row teal-text">
        <label class="active teal-text flow-text">Version: <!--
                -->{{questionItem?.version?.major}}.{{questionItem?.version?.minor}}
        </label>
      </div>
      <div class="col s1 m1 l1">
        <a class="btn-flat btn-floating btn-medium waves-effect waves-light teal"
           (click)="revisionIsVisible = !revisionIsVisible">
          <i class="material-icons left medium" title="Revision history">history</i>
        </a>
      </div>
      <div class="col s10 m10 l10 grey-text text-darken-2">
        <div class="row teal-text">
          <h5>{{questionItem?.question?.question}}</h5>
        </div>
        <div *ngIf="questionItem">
          <div class="row">
            <ul class="collection with-header black-text">
              <li class="collection-header">Question Item</li>
              <li  class="collection-item">Version: {{questionItem?.version?.major}}.
                {{questionItem?.version?.minor}}
              </li>
              <li class="collection-item">Name: {{questionItem?.name}}</li>
              <li class="collection-item">Question Text: {{questionItem?.question?.question}}</li>
              <li class="collection-item">Intent: {{questionItem?.question?.intent}}</li>
            </ul>
          </div>
          <qddt-responsedomain-preview *ngIf="questionItem.responseDomain"
                                       [isVisible]="true" [responseDomain]="questionItem.responseDomain">
          </qddt-responsedomain-preview>
          <div class="row">
            <div class="input-field col s4" *ngIf="elementRevisions.length > 0">
              <label class="active black-text">business version</label>
              <select [(ngModel)]="elementRevision"
                      (ngModelChange)="onSelectElementRevisions($event)"
                      class="black-text"
                      name="element-revision"
                      materialize="material_select">
                <option *ngFor="let revision of elementRevisions"
                        [selected]="revision.revisionNumber === elementRevision"
                        [value]="revision.revisionNumber">
                  {{revision?.entity?.version?.major}}.{{revision?.entity?.version?.minor}}
                </option>
              </select>
            </div>
            <div class="input-field col s6 right">
              <a class="waves-effect waves-light btn green" (click)="onUseElement()">Use this</a>
              <a class="waves-effect waves-light btn red" (click)="closeModal()">Dismiss</a>
            </div>
          </div>
        </div>
        <qddt-revision [isVisible]="revisionIsVisible" *ngIf="revisionIsVisible"
                       [current]="questionItem"
                       [qddtURI]="'audit/questionitem/' + questionItem.id + '/all'"
                       [config]="config"></qddt-revision>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button
      class="btn btn-default red modal-action modal-close waves-effect waves-red">Dismiss</button>
  </div>
</div>
