<form (ngSubmit)="onSavePublication()" #hf="ngForm" title="Publication">
  <div class="row">
    <div class="input-field col s10">
              <textarea class="materialize-textarea"
                        name="{{element?.id}}-publication-name"
                        [(ngModel)]="element.name" [attr.maxlength]="255"
                        required>
              </textarea>
      <label [attr.for]="element.id + '-element-name'" class="teal-text">Name</label>
    </div>
  </div>
  <div class="row">
    <div class="input-field col s6">
              <textarea class="materialize-textarea"
                        name="{{element?.id}}-publication-purpose"
                        [(ngModel)]="element.purpose" [attr.maxlength]="255"
                        required>
              </textarea>
      <label [attr.for]="element.id + '-publication-purpose'" class="teal-text">Purpose</label>
    </div>
  </div>
  <div class="row">
    <div class="input-field col s6">
      <select materialize="material_select" [materializeSelectOptions]="selectOptions"
              name="status-value"
              [ngModel]="selectedOptionValue"
              (change)="onSelectChange($event.target.value)">
        <option [value]="0">Not Published</option>
        <optgroup *ngFor="let option of selectOptions"
                  [attr.label]="option.label">
          <option *ngFor="let child of option.children"
                  [value]="child.id">{{child.label}}</option>
        </optgroup>
      </select>
      <label class="teal-text">Publication status</label>
    </div>
    <div class="input-field col s6">
      <label class="teal-text">{{selectedPublicationStatusOption}}</label>
    </div>
  </div>
  <div class="row">
    <div class="row teal-text">Content list</div>
    <ul *ngIf="element.publicationElements" materialize="collapsible"
        class="collapsible popout" data-collapsible="expandable">
      <li>
        <div class="collapsible-header grey lighten-2">
          <div class="row" style="color: black">
            <div class="col s2">Element type</div>
            <div class="col s8">Element name</div>
            <div class="col s1">Version</div>
            <div class="col s1">Delete</div>
          </div>
        </div>
      </li>
      <li *ngFor="let element of element.publicationElements; let idx=index">
        <div class="collapsible-header grey lighten-5" style="color: #323232">
          <div class="row">
            <div class="col s2">{{element?.elementKind}}</div>
            <div class="col s8">{{element?.element?.name}}</div>
            <div class="col s1"><qddt-version [element]="element?.element"></qddt-version></div>
            <div class="col s1">
              <a class="btn-flat btn-floating btn-medium waves-effect waves-light teal"
                 (click)="deleteElement(idx)">
                <i class="material-icons medium" [ngStyle]="{'width': 'inherit', 'line-height': '37px'}" title="Delete" >delete_forever</i>
              </a>
            </div>
          </div>
        </div>
        <div class="collapsible-body">
          <qddt-publication-preview
            [element]="element.element"
            [elementKind]="getElementbyLabel(element.elementKind).id">
          </qddt-publication-preview>
        </div>
      </li>
      <li>
        <qddt-publication-reuse (publicationElement)="addElement($event)"></qddt-publication-reuse>
      </li>
    </ul>
  </div>
  <div class="row" *ngIf="element?.id">
    <qddt-rational [element]="element" [config]="{hidden: [2]}"></qddt-rational>
  </div>
  <div class="row" *ngIf="element?.id">
    <qddt-element-footer [element]="element" [type]="'PUBLICATION'"></qddt-element-footer>
  </div>
  <div class="row right-align">
    <button type="submit" class="btn btn-default">Submit</button>
  </div>
</form>
